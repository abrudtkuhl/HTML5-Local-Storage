<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Single Page Multi Step Form Using HTML5 Local Storage and KnockoutJS</title>
  
  <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css" />
  <link href="css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div class="container-fluid">
		<div class="row-fluid">
			<div class="span12">
				<h1>Register</h1>
			</div>
		</div>
		<div class="row-fluid">
			<div class="span12">
				<h3>Step <span id="progress-step">1</span></h3>
				<div class="progress">
					<div class="bar" style="width: 10%;"></div>
				</div>
			</div>
		</div>
		<hr />
		<div class="row-fluid">
			<div class="span12">
				<fieldset id="step1">
					<legend>Your Information</legend>
					<form id="formStep1" class="form-horizontal">
						<div class="control-group">
							<label class="control-label" for="name">Name</label>
							<div class="controls">
								<input type="text" name="name" data-bind="value: name" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="email">Email</label>
							<div class="controls">
								<input type="text" name="email" data-bind="value: email" />
							</div>
						</div>
						<div class="control-group">
							<div class="controls">
								<button type="button" class="btn btn-primary next">Next</button>
							</div>
						</div>
					</form>
				</fieldset>
				<fieldset id="step2" class="hide">
					<legend>Your Information</legend>
					<form id="formStep2" class="form-horizontal">
						<div class="control-group">
							<label class="control-label" for="occupation">Occupation</label>
							<div class="controls">
								<input type="text" id="occupation" name="occupation" data-bind="value: occupation" />
							</div>
						</div>
						<div class="control-group">
							<label class="control-label" for="company">Company</label>
							<div class="controls">
								<input type="text" id="company" name="company" />
							</div>
						</div>
						<div class="control-group">
							<div class="controls">
								<button type="button" class="btn btn-primary back">Back</button>
								<button type="button" class="btn btn-primary next">Next</button>
							</div>
						</div>
					</form>
				</fieldset>
				<fieldset id="step3" class="hide">
					<legend>Review and Submit</legend>
					<button id="submitForm" type="button" class="btn btn-primary">Submit</button>
				</fieldset>
			</div>
		</div>
	</div>

	<!-- scripts -->
	<script src="https://raw.github.com/douglascrockford/JSON-js/master/json2.js"></script>
	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="https://raw.github.com/andris9/jStorage/master/jstorage.js"></script>
	<script src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.js"></script>
	<script src="js/steps.js"></script>
	<script src="js/localData.js"></script>
	<script>
		$(document).ready(function() { 
			$("#submitForm").click(function() {
				console.log("saving data::" + ko.toJSON(viewModel));
				$.localData.flush();
			});

			$("input").blur(function() { $.localData.set(); });
		});

		var viewModel = {
			name : $.jStorage.get("name"),
			email : $.jStorage.get("email"),
			occupation : $.jStorage.get("occupation"),
			company : $.jStorage.get("company")
		};

		ko.applyBindings(viewModel);

	</script>

</body>
</html>